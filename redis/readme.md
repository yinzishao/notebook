# redis

## [redis](redis.md)

- 分布式锁
- 搜素指令，如何增量scan。
- 如何持久化。RDB、APF、fork、cow。
- 同步机制。RNB全量、AOF增量，类似binlog日志。
- 集群高可用。Sentinal、Cluster
- 过期策略。几个机制策略
- 并发操作。分布式锁、MVCC
- 一致性问题。
- 事务、管道、脚本区别与使用场景

# 数据结构与对象

## [简单动态字符串](sds.md)

- 常数复杂度获取字符串长度。
- 杜绝缓冲区溢出。
- 减少修改字符串长度时所需的内存重分配次数。空间预分配、惰性空间释放。
- 二进制安全。
- 兼容部分 C 字符串函数。

## [字典](dict.md)
- 从存储效率、快速响应时间、单线程说明redis的关注点
- dict的本质是查找。说明redis的dict的实现。简单对比链表或数组、哈希表、平衡树的场景。
- 哈希算法、碰撞、拉链法、装载因子、扩展收缩、渐进式重哈希(抖动)、
- 重哈希的实现、插入、替换的过程

## [跳跃表](skiplist.md)
- 跳跃表的使用场景，有序集合。
- 数据结构与实现
- 层、前进指针、跨度、后退指针、分值和成员
- 查找问题，为什么需要跳跃表。对比哈希表、平衡数、双向链表的优劣，范围查询、插入和删除操作、内存占用（指针）。
- 性能分析与时间复杂度
- redis的实现特殊性，分值重复、计算排名。
- sort set的实现与升级。ziplist何时转成zset（dict、zskiplist）。

## [quicklist](quicklist.md)
- 版本前后的列表的底层实现。
- quicklist的数据结构
- 双向链表与quicklist的优劣
- 配置多长的ziplist
- 插入的流程。再调整

## [整数集合](intset.md)
- 实现原理、数据结构。
- 升级的过程。添加新元素O(n)
- 升级位置摆放
- 升级的好处。灵活性、节约内存。
- 不允许降级

## [压缩列表](ziplist.md)
- 使用场景、对比双向链表的好处。列表键与哈希键的底层实现之一。
- 数据结构。previous_entry_length方便回溯，encoding记录节点的content类型和长度，content节点的值。以此来表示一个双向链表
- 连锁更新问题。
- ziplist转成dict的条件


## [对象](对象.md)
- 对象的使用场景，根据不同的场景使用不同的数据结构
- 5种对象接受。对象与类型的编码关系，及其转换的条件。
- 字符串对象。embstr对比raw的区别
- 类型检查与命令多态
- 内存回收、引用计算
- 对象共享、预初始化对象
- 空转时长、LRU回收策略

## [Redis源码从哪里读起？](./Redis源码从哪里读起.md)

- 代码的初始化流程。
  - 配置加载和初始化
  - 创建时间循环。多路复用
  - 开始socket监听。文件描述符注册
  - 注册timer事件回调。serverCron，过期key、主从重连等
  - 注册I/O事件回调。TCP和unix domain socket
  - 初始化后台线程。比较耗时、可延迟执行的任务，大key清理、AOF持久化
  - 启动事件循环。
- 事件循环。阻塞循环等待事件触发
- timer事件，阻塞时间触发，循环查找最近的。
- 请求流程。粘包解决、查找命令、执行结果输出buffer。
- 事件驱动自己实现的原因。
